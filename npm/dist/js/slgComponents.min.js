function createEl(e,t){var n,i=document.createElement(e||"div");for(n in t)i[n]=t[n];return i}function ins(e){for(var t=1,n=arguments.length;t<n;t++)e.appendChild(arguments[t]);return e}function addAnimation(e,t,n,i){var s=["opacity",t,~~(100*e),n,i].join("-"),o=.01+n/i*100,r=Math.max(1-(1-e)/t*(100-o),e),a=useCssAnimations.substring(0,useCssAnimations.indexOf("Animation")).toLowerCase(),l=a&&"-"+a+"-"||"";return animations[s]||(sheet.insertRule("@"+l+"keyframes "+s+"{0%{opacity:"+r+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",0),animations[s]=1),s}function vendor(e,t){var n,i,s=e.style;if(void 0!==s[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<prefixes.length;i++)if(n=prefixes[i]+t,void 0!==s[n])return n}function css(e,t){for(var n in t)e.style[vendor(e,n)||n]=t[n];return e}function merge(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)void 0===e[i]&&(e[i]=n[i])}return e}function pos(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function slgGetStyle(e,t){var n="";return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,"").getPropertyValue(t):e.currentStyle&&(t=t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),n=e.currentStyle[t]),n}var prefixes=["webkit","Moz","ms","O"],animations={},useCssAnimations,sheet=function(){var e=createEl("style");return ins(document.getElementsByTagName("head")[0],e),e.sheet||e.styleSheet}(),defaults={lines:12,length:7,width:5,radius:10,rotate:0,color:"#000",speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"slgSpinner",top:"auto",left:"auto"},slgSpinner=function e(t){return this.spin?void(this.opts=merge(t||{},e.defaults,defaults)):new e(t)};slgSpinner.defaults={},merge(slgSpinner.prototype,{spin:function(e){this.stop();var t,n,i=this,s=i.opts,o=i.el=css(createEl(0,{className:s.className}),{position:"relative",zIndex:s.zIndex}),r=s.radius+s.length+s.width;if(e&&(e.insertBefore(o,e.firstChild||null),n=pos(e),t=pos(o),css(o,{left:("auto"==s.left?n.x-t.x+(e.offsetWidth>>1):s.left+r)+"px",top:("auto"==s.top?n.y-t.y+(e.offsetHeight>>1):s.top+r)+"px"})),o.setAttribute("aria-role","progressbar"),i.lines(o,i.opts),!useCssAnimations){var a=0,l=s.fps,c=l/s.speed,d=(1-s.opacity)/(c*s.trail/100),u=c/s.lines;!function e(){a++;for(var t=s.lines;t;t--){var n=Math.max(1-(a+t*u)%c*d,s.opacity);i.opacity(o,s.lines-t,n,s)}i.timeout=i.el&&setTimeout(e,~~(1e3/l))}()}return i},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(e,t){function n(e,n){return css(createEl(),{position:"absolute",width:t.length+t.width+"px",height:t.width+"px",background:e,boxShadow:n,transformOrigin:"left",transform:"rotate("+~~(360/t.lines*s+t.rotate)+"deg) translate("+t.radius+"px,0)",borderRadius:(t.width>>1)+"px"})}for(var i,s=0;s<t.lines;s++)i=css(createEl(),{position:"absolute",top:1+~(t.width/2)+"px",transform:t.hwaccel?"translate3d(0,0,0)":"",opacity:t.opacity,animation:useCssAnimations&&addAnimation(t.opacity,t.trail,s,t.lines)+" "+1/t.speed+"s linear infinite"}),t.shadow&&ins(i,css(n("#000","0 0 4px #000"),{top:"2px"})),ins(e,ins(i,n(t.color,"0 0 1px rgba(0,0,0,.1)")));return e},opacity:function(e,t,n){t<e.childNodes.length&&(e.childNodes[t].style.opacity=n)}}),!function(){function e(e,t){return createEl("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',t)}var t=css(createEl("group"),{behavior:"url(#default#VML)"});!vendor(t,"transform")&&t.adj?(sheet.addRule(".spin-vml","behavior:url(#default#VML)"),slgSpinner.prototype.lines=function(t,n){function i(){return css(e("group",{coordsize:a+" "+a,coordorigin:-r+" "+-r}),{width:a,height:a})}function s(t,s,o){ins(c,ins(css(i(),{rotation:360/n.lines*t+"deg",left:~~s}),ins(css(e("roundrect",{arcsize:1}),{width:r,height:n.width,left:n.radius,top:-n.width>>1,filter:o}),e("fill",{color:n.color,opacity:n.opacity}),e("stroke",{opacity:0}))))}var o,r=n.length+n.width,a=2*r,l=2*-(n.width+n.length)+"px",c=css(i(),{position:"absolute",top:l,left:l});if(n.shadow)for(o=1;o<=n.lines;o++)s(o,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(o=1;o<=n.lines;o++)s(o);return ins(t,c)},slgSpinner.prototype.opacity=function(e,t,n,i){var s=e.firstChild;i=i.shadow&&i.lines||0,s&&t+i<s.childNodes.length&&(s=s.childNodes[t+i],s=s&&s.firstChild,s=s&&s.firstChild,s&&(s.opacity=n))}):useCssAnimations=vendor(t,"animation")}(),angular.module("slgComponents",[]),angular.module("slgComponents").directive("slgButtonSpinner",["$timeout","$interval","$q",function(e,t,n){return{restrict:"EA",scope:{},link:function(i,s,o){function r(){if(i.expanded===!0)return n.when();var e=n.defer();return d().then(function(){i.inProcess=!0,i.expanded=!0;var n=s[0].clientHeight,o=5;n<=20?o=3.5:n<=32&&(o=4),i.originalPadding=parseInt(slgGetStyle(s[0],"padding-right").replace("px",""));var r=i.originalPadding,a=40,l=t(function(){a>32?(r-=1,s[0].style.paddingRight=r+"px"):a>24||(a>14?(r+=o,s[0].style.paddingRight=r+"px"):a>10||(a>0?(r-=1,s[0].style.paddingRight=r+"px"):(t.cancel(l),i.inProcess=!1,e.resolve()))),a--},10)}),e.promise}function a(){if(i.showing===!1)return n.when();var e=n.defer();return d().then(function(){i.inProcess=!0,i.expanded=!1;var n=document.getElementById("slgButtonSpinner_spinner_"+i.$id);n.style.display="none";var o=s[0].clientHeight,r=5;o<=20?r=3.5:o<=32&&(r=4);var a=parseInt(slgGetStyle(s[0],"padding-right").replace("px","")),l=40,c=t(function(){l>32?(a+=1,s[0].style.paddingRight=a+"px"):l>24||(l>14?(a-=r,s[0].style.paddingRight=a+"px"):l>10||(l>0?(a+=1,s[0].style.paddingRight=a+"px"):(t.cancel(c),i.inProcess=!1,e.resolve()))),l--},10)}),e.promise}function l(){var e=s[0].clientHeight,t=12,n={color:"#fff"};e<=20?(n.radius=3,n.length=3,n.width=1):e<=28?(t=15,n.radius=3,n.length=4,n.width=2):e<=32?(t=15,n.radius=4,n.length=4,n.width=2):(t=20,n.radius=5,n.length=5,n.width=2);var o=document.getElementById("slgButtonSpinner_spinner_"+i.$id);o.style.left=t+"px",o.style.display="inline-block";new slgSpinner(n).spin(o)}function c(){var e=document.getElementById("slgButtonSpinner_spinner_"+i.$id);e.style.display="none"}function d(){if(i.inProcess===!1)return n.when();var e=n.defer(),s=100,o=t(function(){(i.inProcess===!1||s--<=0)&&(t.cancel(o),s<=0&&console.log("slgButtonSpinner wait failed"),e.resolve())},50);return e.promise}i.expanded=!1,i.inProcess=!1,i.showSuccessIndicator=!0,s.append(angular.element("<div id='slgButtonSpinner_spinner_"+i.$id+"' class='slgButtonSpinner_spinner'></div>")),s.append(angular.element("<div id='slgButtonSpinner_check_"+i.$id+"' class='slgButtonSpinner_check'><i class='fa fa-check-circle-o'></i></div>")),s.append(angular.element("<div id='slgButtonSpinner_error_"+i.$id+"' class='slgButtonSpinner_error'><i class='fa fa-times-circle-o'></i></div>")),o.slgButtonSpinner&&i.$watch("$parent."+o.slgButtonSpinner,function(t,n){if(n!==t)if(t===!0)i.waitToShowSpinner=e(function(){r().then(function(){l()})},100);else if(t===!1)if(e.cancel(i.waitToShowSpinner),c(),i.showSuccessIndicator===!1)a();else{var s=document.getElementById("slgButtonSpinner_check_"+i.$id);s.style.display="inline-block"}})}}}]),angular.module("slgComponents").service("slgPleaseWaitSvc",["$timeout",function(e){function t(t){t=null===t||void 0===t?300:t,0===a.count&&(a.safetyTimeout=e(function(){r()},1e4),a.slgPleaseWaitTimeout=e(function(){o()},t)),a.count++}function n(){o()}function i(){a.count=0,r()}function s(){0!==a.count&&(a.count--,0===a.count&&r())}function o(){var e=document.getElementById("slgPleaseWaitOverlay");e.style.display="inline-block"}function r(){var t=document.getElementById("slgPleaseWaitOverlay");t.style.display="none",e.cancel(a.slgPleaseWaitTimeout),e.cancel(a.safetyTimeout)}var a={count:0,spinner:null,slgPleaseWaitTimeout:null,safetyTimeout:null},l=angular.element("<div id='slgPleaseWaitOverlay'><div id='slgPleaseWaitSpinner'></div></div>");document.body.appendChild(l[0]);var c={lines:13,length:15,width:10,radius:20,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,zIndex:2e9};return a.spinner=new slgSpinner(c).spin(document.getElementById("slgPleaseWaitSpinner")),console.log("Spinner Activated"),{show:t,hide:s,forceShow:n,forceHide:i}}]);
//# sourceMappingURL=slgComponents.min.js.map
